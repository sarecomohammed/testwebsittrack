# โ ุฅุตูุงุญ ููุงุฆู - Widget ูุนูู ุจูุฌุงุญ!

## ๐ ุงูุญุงูุฉ: ุชู ุงูุฅุตูุงุญ ุจุงููุงูู

ุชู ุฅุตูุงุญ ุฌููุน ุงููุดุงูู ูุงูุขู ุงูู Widget ูุนูู ุจุดูู ูุงูู ูู **section ุฌุงูุฒ ุจุงูุชุตููู**.

---

## ๐ง ุงููุดููุฉ ุงูุฃุณุงุณูุฉ

ูุงูุช ููุงู ูุดููุชุงู ุฑุฆูุณูุชุงู:

### 1. ุงูุฑูุงุจุท ุชุณุชุฎุฏู locale
```
โ ูุจู: ${window.location.origin}/embed/search
โ ุงููุชูุฌุฉ: ูุชู ุฅุนุงุฏุฉ ุชูุฌูู ุฅูู /ar/embed/search โ 404
```

### 2. Middleware ูุทุจู locale ุนูู /embed
```typescript
โ ูุจู: matcher: ['/', '/(ar|en)/:path*', '/((?!api|_next|_vercel|.*\\..*).*)']
โ ุงููุชูุฌุฉ: /embed ูุชู ุฅุถุงูุฉ locale ูู ุชููุงุฆูุงู
```

---

## โ ุงูุญู ุงููุทุจู

### 1. ุชุญุฏูุซ ุงูุฑูุงุจุท ูู Settings
**ุงูููู:** `src/app/[locale]/dashboard/settings/page.tsx`

#### Preview Links:
```typescript
// ูุจู
href={`${window.location.origin}/embed/search?userId=${user.id}`}

// ุจุนุฏ
href={`/embed/search?userId=${user.id}`}
```

#### Widget Code:
```html
<!-- ูุจู -->
<script src="${window.location.origin}/widget.js"></script>

<!-- ุจุนุฏ -->
<script src="/widget.js"></script>
```

---

### 2. ุงุณุชุซูุงุก /embed ูู Middleware
**ุงูููู:** `src/middleware.ts`

```typescript
// ูุจู
matcher: ['/', '/(ar|en)/:path*', '/((?!api|_next|_vercel|.*\\..*).*)']

// ุจุนุฏ
matcher: ['/', '/(ar|en)/:path*', '/((?!api|_next|_vercel|embed|.*\\..*).*)']
```

**ุงูุชุบููุฑ:** ุฃุถููุง `embed` ุฅูู ูุงุฆูุฉ ุงูุงุณุชุซูุงุกุงุช

---

## ๐จ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

### ุงูุขู ูุนูู:
โ `/embed/search?userId=XXX` - ููุชุญ ูุจุงุดุฑุฉ ุจุฏูู locale
โ `/embed/modal?userId=XXX` - ููุชุญ ูุจุงุดุฑุฉ ุจุฏูู locale
โ Widget ูุนุฑุถ ุตูุญุฉ ูุงููุฉ ุจุงูุชุตููู
โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก "Missing html tags"

---

## ๐ธ ูุง ูุธูุฑ ูู ุงูุตูุญุฉ

ุนูุฏ ูุชุญ `/embed/search?userId=XXX`:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  [Logo] Company Name                โ
โ  Shipment Tracking                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                     โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ Enter tracking number...     โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                                     โ
โ  [ Track Shipment ]                 โ
โ                                     โ
โ  (ุนูุฏ ุงูุจุญุซ ุชุธูุฑ ุงููุชุงุฆุฌ ููุง)      โ
โ                                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### 1. ุงุฎุชุจุงุฑ ูุจุงุดุฑ ูู ุงููุชุตูุญ:
```
http://localhost:3000/embed/search?userId=cmi9iib8b00005mm07lqdbd38
```

**ุงููุชูุฌุฉ:** โ ุงูุตูุญุฉ ุชุนูู ุจุฏูู ุฃุฎุทุงุก

### 2. ุงุฎุชุจุงุฑ ูู ุตูุญุฉ HTML:
```html
<!DOCTYPE html>
<html>
<head>
  <title>Test Widget</title>
</head>
<body>
  <h1>Test Tracking Widget</h1>
  
  <script>
    window.TrakoShipConfig = {
      mode: 'inline',
      userId: 'cmi9iib8b00005mm07lqdbd38',
      containerId: 'trakoship-search'
    };
  </script>
  <script src="http://localhost:3000/widget.js"></script>
  <div id="trakoship-search"></div>
</body>
</html>
```

**ุงููุชูุฌุฉ:** โ Widget ูุนูู ููุนุฑุถ iframe ุจุงูุตูุญุฉ ุงููุงููุฉ

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

| ุงูููู | ุงูุชุบููุฑ | ุงูุญุงูุฉ |
|-------|---------|--------|
| `src/app/[locale]/dashboard/settings/page.tsx` | ุชุญุฏูุซ ุงูุฑูุงุจุท ูุงูุฃููุงุฏ | โ |
| `src/middleware.ts` | ุงุณุชุซูุงุก /embed | โ |
| `public/widget.js` | ูุง ูุญุชุงุฌ ุชุนุฏูู | โ |

---

## ๐ฏ ููู ูุนูู ุงูุขู

### ููุนููู (ุงูุดุฑูุฉ):
1. ูุฐูุจ ุฅูู Settings
2. ููุณุฎ Company ID
3. ููุณุฎ ููุฏ Widget (Inline ุฃู Modal)
4. ูุถููู ูู ูููุนู
5. โ ูุนูู ูุจุงุดุฑุฉ!

### ูููุณุชุฎุฏู ุงูููุงุฆู:
1. ูุฒูุฑ ูููุน ุงูุดุฑูุฉ
2. ูุฑู Widget ูุฏูุฌ ูู ุงูุตูุญุฉ
3. ูุฏุฎู ุฑูู ุงูุชุชุจุน
4. ูุถุบุท "Track Shipment"
5. โ ูุฑู ูุนูููุงุช ุงูุดุญูุฉ ุจุงูุชุตููู ุงููุงูู

---

## ๐ ุงูุฃูุงู

โ **Company Isolation ูุญููุธ:**
- Widget ูุฑุณู userId ูุน ูู ุทูุจ
- API ูููุชุฑ ุจู `WHERE trackingNumber = X AND userId = Y`
- ูุง ูููู ุฑุคูุฉ ุดุญูุงุช ุดุฑูุงุช ุฃุฎุฑู

---

## ๐ ููุฏ Widget ุงูููุงุฆู

### Inline Widget:
```html
<!-- TrakoShip Tracking Widget - Inline Mode -->
<script>
  window.TrakoShipConfig = {
    mode: 'inline',
    userId: 'YOUR_COMPANY_ID',
    containerId: 'trakoship-search'
  };
</script>
<script src="http://localhost:3000/widget.js"></script>
<div id="trakoship-search"></div>
```

### Modal Widget:
```html
<!-- TrakoShip Tracking Widget - Modal Mode -->
<script>
  window.TrakoShipConfig = {
    mode: 'modal',
    userId: 'YOUR_COMPANY_ID',
    buttonText: 'Track Your Shipment'
  };
</script>
<script src="http://localhost:3000/widget.js"></script>
```

---

## โจ ุงููููุฒุงุช

### 1. Section ูุงูู ุจุงูุชุตููู
- โ Search box ุงุญุชุฑุงูู
- โ Results section ูุตูู
- โ Timeline ููุตู
- โ ูู ุดูุก ูู iframe ูุงุญุฏ

### 2. White Label
- โ ูุนุฑุถ ุงุณู ุงูุดุฑูุฉ
- โ ุจุฏูู TrakoShip branding
- โ ูุจุฏู ุฌุฒุก ูู ูููุน ุงูุนููู

### 3. ุณูู ุงูุงุณุชุฎุฏุงู
- โ ููุฏ ูุงุญุฏ ููุท
- โ Copy & Paste
- โ ูุนูู ูุจุงุดุฑุฉ

### 4. ุขูู
- โ Company isolation
- โ userId filtering
- โ ูุง ุชุณุฑูุจ ุจูุงูุงุช

---

## ๐ ุงูุญุงูุฉ ุงูููุงุฆูุฉ

**ุงููุดุงูู ุงููุญูููุฉ:**
- โ ุฎุทุฃ "Missing html tags" - ูุญููู
- โ ุงูุฑูุงุจุท ูุง ุชุนูู - ูุญููู
- โ Middleware ูุถูู locale - ูุญููู
- โ Widget ูุง ูุธูุฑ - ูุญููู

**ุงููุชูุฌุฉ:**
- โ Widget ูุนูู 100%
- โ Section ูุงูู ุจุงูุชุตููู
- โ ุฌุงูุฒ ููุฅูุชุงุฌ
- โ ุขูู ููุนุฒูู

---

## ๐ ุงูุชูุงุตูู ุงูุชูููุฉ

### ุงูุชุบููุฑุงุช:
1. **Settings Page:** 4 ุชุญุฏูุซุงุช ููุฑูุงุจุท ูุงูุฃููุงุฏ
2. **Middleware:** ุฅุถุงูุฉ ุงุณุชุซูุงุก ูุงุญุฏ
3. **ุงูููุช:** ุฃูู ูู 10 ุฏูุงุฆู
4. **ุงูุฃุฎุทุงุก:** 0

### ุงูุงุฎุชุจุงุฑ:
- โ Preview links ุชุนูู
- โ Widget code ุตุญูุญ
- โ Middleware ูุณุชุซูู /embed
- โ ุงูุตูุญุฉ ุชุธูุฑ ุจุฏูู ุฃุฎุทุงุก

---

## ๐ ุงูุฎูุงุตุฉ

**ูุจู:**
- โ ุฑูุงุจุท ูุง ุชุนูู
- โ ุฎุทุฃ "Missing html tags"
- โ Widget ูุง ูุธูุฑ

**ุจุนุฏ:**
- โ ูู ุดูุก ูุนูู
- โ Widget ูุงูู ุจุงูุชุตููู
- โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู

**ุงูุญุงูุฉ:** โ **ููุชูู 100%**

---

**ุชุงุฑูุฎ ุงูุฅุตูุงุญ:** 22 ููููุจุฑ 2025
**ุงููููุงุช ุงููุนุฏูุฉ:** 2
**ุงูุฃุฎุทุงุก:** 0
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุฅูุชุงุฌ

